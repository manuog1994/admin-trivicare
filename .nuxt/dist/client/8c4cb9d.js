(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{611:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"imageMeta",(function(){return et})),n.d(e,"types",(function(){return nt}));const r={validate:t=>"BM"===t.toString("ascii",0,2),calculate:t=>({height:Math.abs(t.readInt32LE(22)),width:t.readUInt32LE(18)})};function c(t,e){const n=t.readUInt8(e);return 0===n?256:n}function h(t,e){const n=6+16*e;return{height:c(t,n+1),width:c(t,n)}}const o={validate:t=>0===t.readUInt16LE(0)&&1===t.readUInt16LE(2),calculate(t){const e=t.readUInt16LE(4),n=h(t,0);if(1===e)return n;const r=[n];for(let n=1;n<e;n+=1)r.push(h(t,n));return{height:n.height,images:r,width:n.width}}},d={validate:t=>0===t.readUInt16LE(0)&&2===t.readUInt16LE(2),calculate:t=>o.calculate(t)},l={validate:t=>542327876===t.readUInt32LE(0),calculate:t=>({height:t.readUInt32LE(12),width:t.readUInt32LE(16)})},f=/^GIF8[79]a/,w={validate(t){const e=t.toString("ascii",0,6);return f.test(e)},calculate:t=>({height:t.readUInt16LE(8),width:t.readUInt16LE(6)})},I={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function E(t,e){const n=e+4;return[t.toString("ascii",e,n),t.readUInt32BE(n)]}function U(t){const e=I[t];return{width:e,height:e,type:t}}const m={validate:t=>"icns"===t.toString("ascii",0,4),calculate(t){const e=t.length,n=t.readUInt32BE(4);let r=8,c=E(t,r),h=U(c[0]);if(r+=c[1],r===n)return h;const o={height:h.height,images:[h],width:h.width};for(;r<n&&r<e;)c=E(t,r),h=U(c[0]),r+=c[1],o.images.push(h);return o}},v={validate:t=>"ff4fff51"===t.toString("hex",0,4),calculate:t=>({height:t.readUInt32BE(12),width:t.readUInt32BE(8)})},S="66747970",B="6a703268",P="6a502020",L="72726571",x=t=>({height:t.readUInt32BE(4),width:t.readUInt32BE(8)}),y={validate(t){const e=t.toString("hex",4,8),n=t.readUInt32BE(0);if(e!==P||n<1)return!1;const r=n+4,c=t.readUInt32BE(n);return t.slice(r,r+c).toString("hex",0,4)===S},calculate(t){const e=t.readUInt32BE(0);let n=e+4+t.readUInt16BE(e+2);switch(t.toString("hex",n,n+4)){case L:return n=n+4+4+(t=>{const e=t.readUInt8(0);let n=1+2*e;return n=n+2+t.readUInt16BE(n)*(2+e),n+2+t.readUInt16BE(n)*(16+e)})(t.slice(n+4)),x(t.slice(n+8,n+24));case B:return x(t.slice(n+8,n+24));default:throw new TypeError("Unsupported header found: "+t.toString("ascii",n,n+4))}}};function k(t,e,n,r){n=n||0;return t["readUInt"+e+(r?"BE":"LE")].call(t,n)}const T=6,M=12,j=2;function G(t){return"45786966"===t.toString("hex",2,6)}function C(t,e){return{height:t.readUInt16BE(e),width:t.readUInt16BE(e+2)}}function F(t,e){const n=t.slice(2,e),r=n.toString("hex",T,T+2),c="4d4d"===r;if(c||"4949"===r)return function(t,e){const n=T+8,r=k(t,16,n,e);for(let c=0;c<r;c++){const r=n+j+c*M,h=r+M;if(r>t.length)return;const o=t.slice(r,h);if(274===k(o,16,0,e)){if(3!==k(o,16,2,e))return;if(1!==k(o,32,4,e))return;return k(o,16,8,e)}}}(n,c)}function J(t,e){if(e>t.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(255!==t[e])throw new TypeError("Invalid JPG, marker table corrupted")}const N={validate:t=>"ffd8"===t.toString("hex",0,2),calculate(t){let e,n;for(t=t.slice(4);t.length;){const i=t.readUInt16BE(0);if(G(t)&&(e=F(t,i)),J(t,i),n=t[i+1],192===n||193===n||194===n){const n=C(t,i+5);return e?{height:n.height,orientation:e,width:n.width}:n}t=t.slice(i+2)}throw new TypeError("Invalid JPG, no size found")}},V={validate:t=>"KTX 11"===t.toString("ascii",1,7),calculate:t=>({height:t.readUInt32LE(40),width:t.readUInt32LE(36)})},O="CgBI",W={validate(t){if("PNG\r\n\n"===t.toString("ascii",1,8)){let e=t.toString("ascii",12,16);if(e===O&&(e=t.toString("ascii",28,32)),"IHDR"!==e)throw new TypeError("Invalid PNG");return!0}return!1},calculate:t=>t.toString("ascii",12,16)===O?{height:t.readUInt32BE(36),width:t.readUInt32BE(32)}:{height:t.readUInt32BE(20),width:t.readUInt32BE(16)}},z={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},A=Object.keys(z),R={default:t=>{let e=[];for(;t.length>0;){const line=t.shift();if("#"!==line[0]){e=line.split(" ");break}}if(2===e.length)return{height:parseInt(e[1],10),width:parseInt(e[0],10)};throw new TypeError("Invalid PNM")},pam:t=>{const e={};for(;t.length>0;){const line=t.shift();if(line.length>16||line.charCodeAt(0)>128)continue;const[n,r]=line.split(" ");if(n&&r&&(e[n.toLowerCase()]=parseInt(r,10)),e.height&&e.width)break}if(e.height&&e.width)return{height:e.height,width:e.width};throw new TypeError("Invalid PAM")}},X=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,D={height:/\sheight=(['"])([^%]+?)\1/,root:X,viewbox:/\sviewBox=(['"])(.+?)\1/,width:/\swidth=(['"])([^%]+?)\1/},H=2.54,K={cm:96/H,em:16,ex:8,m:96/H*100,mm:96/H/10,pc:96/72/12,pt:96/72};function $(t){const e=/([0-9.]+)([a-z]*)/.exec(t);if(e)return Math.round(parseFloat(e[1])*(K[e[2]]||1))}function Q(t){const e=t.split(" ");return{height:$(e[3]),width:$(e[2])}}const Y={bmp:r,cur:d,dds:l,gif:w,icns:m,ico:o,j2c:v,jp2:y,jpg:N,ktx:V,png:W,pnm:{validate(t){const e=t.toString("ascii",0,2);return A.includes(e)},calculate(t){const e=t.toString("ascii",0,2),n=z[e],r=t.toString("ascii",3).split(/[\r\n]+/);return(R[n]||R.default)(r)}},psd:{validate:t=>"8BPS"===t.toString("ascii",0,4),calculate:t=>({height:t.readUInt32BE(14),width:t.readUInt32BE(18)})},svg:{validate(t){const e=String(t);return X.test(e)},calculate(t){const e=t.toString("utf8").match(D.root);if(e){const t=function(t){const e=t.match(D.width),n=t.match(D.height),r=t.match(D.viewbox);return{height:n&&$(n[2]),viewbox:r&&Q(r[2]),width:e&&$(e[2])}}(e[0]);if(t.width&&t.height)return function(t){return{height:t.height,width:t.width}}(t);if(t.viewbox)return function(t,e){const n=e.width/e.height;return t.width?{height:Math.floor(t.width/n),width:t.width}:t.height?{height:t.height,width:Math.floor(t.height*n)}:{height:e.height,width:e.width}}(t,t.viewbox)}throw new TypeError("Invalid SVG")}},webp:{validate(t){const e="RIFF"===t.toString("ascii",0,4),n="WEBP"===t.toString("ascii",8,12),r="VP8"===t.toString("ascii",12,15);return e&&n&&r},calculate(t){const e=t.toString("ascii",12,16);if(t=t.slice(20,30),"VP8X"===e){const e=t[0];if(0==(192&e)&&0==(1&e))return function(t){return{height:1+t.readUIntLE(7,3),width:1+t.readUIntLE(4,3)}}(t);throw new TypeError("Invalid WebP")}if("VP8 "===e&&47!==t[0])return function(t){return{height:16383&t.readInt16LE(8),width:16383&t.readInt16LE(6)}}(t);const n=t.toString("hex",3,6);if("VP8L"===e&&"9d012a"!==n)return function(t){return{height:1+((15&t[4])<<10|t[3]<<2|(192&t[2])>>6),width:1+((63&t[2])<<8|t[1])}}(t);throw new TypeError("Invalid WebP")}}},Z=t=>"svg"===t?"image/svg+xml":`image/${t}`,_=Object.keys(Y),tt={56:"psd",66:"bmp",68:"dds",71:"gif",73:"tiff",77:"tiff",82:"webp",105:"icns",137:"png",255:"jpg"};function it(t,e){const n=function(t){const e=t[0];if(e in tt){const n=tt[e];if(Y[n].validate(t))return n}return _.find((e=>Y[e].validate(t)))}(t);if(n&&n in Y){const r=Y[n].calculate(t,e);if(void 0!==r)return r.type=n,r.mimeType=Z(n),r}throw new TypeError("unsupported file type: "+n+" (file: "+e+")")}function et(input){if(t.isBuffer(input))return it(input);throw new Error("Input should be buffer!")}const nt=Object.keys(Y)}.call(this,n(202).Buffer)}}]);