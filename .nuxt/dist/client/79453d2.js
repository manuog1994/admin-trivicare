(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{654:function(e,t,o){"use strict";o.r(t);o(17),o(13),o(2),o(0),o(12),o(15),o(76);var r=o(566),n=o(567),l={props:{saveGuest:{type:Boolean,default:!1}},data:function(){return{checked:!1,disabled:!0,paises:[{id:28,name:"España"}],provincias:r,ciudades:n,cities:[],guest:{},formHidden:!0,invoice_paper:!1,note:"",errorForm:!1}},computed:{guestStore:function(){return this.$store.getters.getGuest}},mounted:function(){this.$emit("savGuest",!1)},watch:{saveGuest:function(){1==this.saveGuest&&this.createUser()}},methods:{createUser:function(){this.guestStore.name||this.guestStore.lastname||this.guestStore.address||this.guestStore.state||this.guestStore.city||this.guestStore.zipcode||this.guestStore.phone||this.guestStore.dni?(this.$store.commit("SET_STEP3",!0),window.scrollTo(0,0)):this.$refs.guestform.checkValidity()?(this.errorForm=!1,this.$refs.guestform.classList.remove("was-validated"),this.guest.email=this.$store.getters.getGuest.email,""!=this.guest.name&&""!=this.guest.lastname&&""!=this.guest.address&&""!=this.guest.state&&""!=this.guest.city&&""!=this.guest.zipcode&&""!=this.guest.phone&&""!=this.guest.dni?(this.$store.commit("SET_GUEST",this.guest),this.$store.commit("SET_STEP3",!0),this.$store.commit("SET_INVOICE_PAPER",this.invoice_paper),this.$store.commit("SET_NOTE",this.note),window.scrollTo(0,0)):this.errorForm=!0):(this.errorForm=!0,this.$refs.guestform.classList.add("was-validated"),this.$emit("savGuest",!1),window.scrollTo(0,0))},getStates:function(e){var t=e.target.value,o=this.paises.find((function(e){return e.name===t})).id;this.provincias=this.provincias.data.filter((function(e){return e.id_country===o}))},getCities:function(e){var t=e.target.value,o=this.provincias.find((function(e){return e.name===t})).id;this.cities=this.ciudades.data.filter((function(e){return e.id_state===o}))},deleteGuest:function(){this.$store.commit("CLEAR_GUEST"),this.$store.commit("SET_STEP2",!1),this.$store.commit("SET_STEP3",!1),this.$store.commit("SET_STEP4",!1),this.$router.push({query:{reserve:this.$route.query.reserve,step:1}})}}},c=o(68),component=Object(c.a)(l,(function(){var e=this,t=e._self._c;return t("div",[t("form",{ref:"guestform",staticClass:"row",class:{hidden:null!=e.guestStore.address},on:{submit:function(t){return t.preventDefault(),e.createUser.apply(null,arguments)}}},[t("div",{staticClass:"col-lg-6 col-md-6"},[t("div",{staticClass:"billing-info"},[t("label",[e._v("Nombre*")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.guest.name,expression:"guest.name"}],staticClass:"form-control",attrs:{name:"name",type:"text",required:""},domProps:{value:e.guest.name},on:{input:function(t){t.target.composing||e.$set(e.guest,"name",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"col-lg-6 col-md-6"},[t("div",{staticClass:"billing-info"},[t("label",[e._v("Apellidos*")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.guest.lastname,expression:"guest.lastname"}],staticClass:"form-control",attrs:{name:"lastname",type:"text",required:""},domProps:{value:e.guest.lastname},on:{input:function(t){t.target.composing||e.$set(e.guest,"lastname",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"col-lg-12 col-md-12"},[t("div",{staticClass:"billing-info"},[t("label",[e._v("Dirección*")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.guest.address,expression:"guest.address"}],staticClass:"form-control",attrs:{name:"address",type:"text",required:""},domProps:{value:e.guest.address},on:{input:function(t){t.target.composing||e.$set(e.guest,"address",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"col-lg-12 col-md-12"},[t("div",{staticClass:"billing-info"},[t("label",[e._v("Dirección 2 (Opcional)")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.guest.optional_address,expression:"guest.optional_address"}],staticClass:"form-control",attrs:{name:"optional_address",type:"text"},domProps:{value:e.guest.optional_address},on:{input:function(t){t.target.composing||e.$set(e.guest,"optional_address",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"col-lg-6 col-md-6"},[t("div",{staticClass:"billing-info"},[t("label",{attrs:{for:""}},[e._v("País*")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.guest.country,expression:"guest.country"}],staticClass:"form-select",attrs:{"aria-label":"Default select example",name:"country",required:""},on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.guest,"country",t.target.multiple?o:o[0])},e.getStates]}},[t("option",{attrs:{disabled:"",selected:""}},[e._v("Seleccione su país")]),e._v(" "),e._l(e.paises,(function(o){return t("option",{key:o.id,domProps:{value:o.name}},[e._v(e._s(o.name))])}))],2)])]),e._v(" "),t("div",{staticClass:"col-lg-6 col-md-6"},[t("div",{staticClass:"billing-info"},[t("label",{attrs:{for:""}},[e._v("Provincia*")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.guest.state,expression:"guest.state"}],staticClass:"form-select",attrs:{"aria-label":"Default select example",name:"state",required:""},on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.guest,"state",t.target.multiple?o:o[0])},e.getCities]}},[t("option",{attrs:{disabled:"",selected:""}},[e._v("Seleccione su provincia")]),e._v(" "),e._l(e.provincias,(function(o){return t("option",{key:"state"+o.id,domProps:{value:o.name}},[e._v(e._s(o.name))])}))],2)])]),e._v(" "),t("div",{staticClass:"col-lg-8 col-md-8"},[t("div",{staticClass:"billing-info"},[t("label",{attrs:{for:""}},[e._v("Ciudad*")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.guest.city,expression:"guest.city"}],staticClass:"form-select",attrs:{"aria-label":"Default select example",name:"city",required:""},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.guest,"city",t.target.multiple?o:o[0])}}},[t("option",{attrs:{disabled:"",selected:""}},[e._v("Seleccione su ciudad")]),e._v(" "),e._l(e.cities,(function(o){return t("option",{key:"city"+o.name,domProps:{value:o.name}},[e._v(e._s(o.name))])}))],2)])]),e._v(" "),t("div",{staticClass:"col-lg-4 col-md-4"},[t("div",{staticClass:"billing-info"},[t("label",[e._v("Código Postal*")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.guest.zipcode,expression:"guest.zipcode"}],staticClass:"form-control",attrs:{name:"zipcode",type:"number",required:""},domProps:{value:e.guest.zipcode},on:{input:function(t){t.target.composing||e.$set(e.guest,"zipcode",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"col-lg-5 col-md-5"},[t("div",{staticClass:"billing-info"},[t("label",[e._v("Teléfono*")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.guest.phone,expression:"guest.phone"}],staticClass:"form-control",attrs:{name:"phone",type:"number",required:""},domProps:{value:e.guest.phone},on:{input:function(t){t.target.composing||e.$set(e.guest,"phone",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"col-lg-7 col-md-7"},[t("div",{staticClass:"billing-info"},[t("label",[e._v("DNI/NIE/NIF*")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.guest.dni,expression:"guest.dni"}],staticClass:"form-control",attrs:{name:"dni",type:"text",required:""},domProps:{value:e.guest.dni},on:{input:function(t){t.target.composing||e.$set(e.guest,"dni",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"col-lg-12 col-md-12"},[t("div",{staticClass:"billing-info"},[t("label",[e._v("Nota para el pedido (Opcional)")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.note,expression:"note"}],staticClass:"form-control",attrs:{name:"note",rows:"3"},domProps:{value:e.note},on:{input:function(t){t.target.composing||(e.note=t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"col-lg-12 col-md-12 mt-2"},[t("div",{staticClass:"billing-info"},[t("div",{staticClass:"form-check"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.invoice_paper,expression:"invoice_paper"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"true",id:"invoice_paper"},domProps:{checked:Array.isArray(e.invoice_paper)?e._i(e.invoice_paper,"true")>-1:e.invoice_paper},on:{change:function(t){var o=e.invoice_paper,r=t.target,n=!!r.checked;if(Array.isArray(o)){var l="true",c=e._i(o,l);r.checked?c<0&&(e.invoice_paper=o.concat([l])):c>-1&&(e.invoice_paper=o.slice(0,c).concat(o.slice(c+1)))}else e.invoice_paper=n}}}),e._v(" "),t("label",{staticClass:"form-check-label",attrs:{for:"flexCheckDefault"}},[e._v("\n                        Marque esta casilla si desea recibir la factura imprimida en papel.\n                    ")])])])])]),e._v(" "),1==e.errorForm?t("div",{staticClass:"d-flex justify-content-center"},[e._m(0)]):e._e(),e._v(" "),t("div",{class:{hidden:!e.guestStore.address}},[t("div",{staticClass:"card w-50 m-auto"},[t("div",{staticClass:"card-body"},[t("div",{staticClass:"text-center"},[t("span",[t("strong",[e._v(e._s(e.guestStore.name)+" "+e._s(e.guestStore.lastname))])])]),e._v(" "),t("div",{staticClass:"text-center"},[t("span",[e._v("\n                        "+e._s(e.guestStore.address)+"\n                    ")])]),e._v(" "),e.guestStore.optional_address?t("div",{staticClass:"text-center"},[t("span",[e._v("\n                        "+e._s(e.guestStore.optional_address)+"\n                    ")])]):e._e(),e._v(" "),t("div",{staticClass:"text-center"},[t("span",[e._v("\n                        "+e._s(e.guestStore.zipcode)+", "+e._s(e.guestStore.city)+", "+e._s(e.guestStore.state)+", "+e._s(e.guestStore.country)+"\n                    ")])])]),e._v(" "),t("div",{staticClass:"card-footer"},[t("div",{staticClass:"text-center"},[t("button",{staticClass:"btn bg-trivi-red text-white",on:{click:e.deleteGuest}},[e._v("Eliminar")])])])])])])}),[function(){var e=this._self._c;return e("span",{staticClass:"text-danger text-center"},[e("i",[this._v("Para seguir con la compra, debe completar todos los campos requeridos en el formulario.")])])}],!1,null,null,null);t.default=component.exports}}]);