(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{657:function(t,e,r){"use strict";r.r(e);var n=r(11),o=(r(51),r(15),r(0),r(31),r(13),r(2),r(17),{data:function(){return{products:[],reviews:[],page:1,perPage:10}},mounted:function(){this.getReviews(),this.getProducts()},computed:{paginatedReviews:function(){return this.reviews.slice((this.page-1)*this.perPage,this.page*this.perPage)}},methods:{getProducts:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("getProducts",{page:"",category:"",search:"",slug:"",sort:"",tag:"",status:2});case 2:r=t.$store.getters.getProducts,t.products=r.data;case 4:case"end":return e.stop()}}),e)})))()},getReviews:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/api/reviews").then((function(e){t.reviews=e.data.reviews}));case 2:case"end":return e.stop()}}),e)})))()},filterProduct:function(t){var e;return null===(e=this.products)||void 0===e?void 0:e.filter((function(e){if(t==e.id)return e.name})).map((function(t){return t.name})).toString()},destroy:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$axios.delete("/api/reviews/"+t).then((function(t){e.getReviews()}));case 2:case"end":return r.stop()}}),r)})))()},myCallBack:function(t){this.page=t}}}),c=r(68),component=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("div",{staticClass:"mb-2"},[e("div",{staticClass:"d-flex justify-content-end"},[e("button",{staticClass:"btn bg-trivi-orange",on:{click:function(e){return t.$root.$emit("newReview",!0)}}},[e("i",{staticClass:"fa fa-plus"})])]),t._v(" "),t._m(0)]),t._v(" "),e("table",{staticClass:"table"},[t._m(1),t._v(" "),e("tbody",t._l(t.paginatedReviews,(function(r){return e("tr",{key:r.id},[e("td",[t._v(t._s(t.filterProduct(null==r?void 0:r.product_id)))]),t._v(" "),e("td",[t._v(t._s(r.user_name)+" "+t._s(r.user_lastname))]),t._v(" "),e("td",[e("vue-star-rating",{attrs:{"read-only":!0,rating:r.rating,"star-size":20}})],1),t._v(" "),e("td",[t._v(t._s(r.message))]),t._v(" "),e("td",[e("button",{on:{click:function(e){return e.preventDefault(),t.destroy(r.id)}}},[e("i",{staticClass:"fa fa-trash-o"})])])])})),0)]),t._v(" "),t.reviews.length>10?e("div",{staticClass:"d-flex justify-content-center"},[e("pagination",{attrs:{records:t.reviews.length,perPage:t.perPage},on:{paginate:t.myCallBack},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1):t._e()])}),[function(){var t=this._self._c;return t("div",{staticClass:"d-flex justify-content-start"},[t("h3",[this._v("Valoraciones")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("Producto")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Usuario")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Valoraci√≥n")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Comentario")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Acciones")])])])}],!1,null,null,null);e.default=component.exports}}]);