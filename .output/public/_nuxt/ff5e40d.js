(window.webpackJsonp=window.webpackJsonp||[]).push([[58,30,51],{534:function(e,t,n){e.exports={}},535:function(e,t,n){"use strict";n.r(t);n(9),n(132),n(17);var r=n(11),o=(n(51),{data:function(){return{searchFather:!1,products:[],search:"",url:"https://admin.trivicare.com",hidden:!0}},watch:{search:function(e){if(""==e||null==e)return this.products=[],this.$root.$emit("opacityOther",!1),void(this.hidden=!0);this.search=e,this.getProducts(),this.$root.$emit("opacityOther",!0)}},methods:{getProducts:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("getProducts",{perPage:"",page:"",category:"",search:e.search,slug:"",sort:"",tag:"",status:2});case 2:n=e.$store.getters.getProducts,e.products=n.data;case 4:case"end":return t.stop()}}),t)})))()}}}),c=(n(536),n(68)),component=Object(c.a)(o,(function(){var e=this,t=e._self._c;return t("client-only",[t("div",{staticClass:"container d-block"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"form-control rounded-0",attrs:{type:"text",placeholder:"Encuentra tu lado más natural...","aria-label":"Buscar...","aria-describedby":"basic-addon1"},domProps:{value:e.search},on:{input:[function(t){t.target.composing||(e.search=t.target.value)},function(t){e.hidden=!1}]}}),e._v(" "),t("span",{staticClass:"input-group-text rounded-0 bg-blue-color",attrs:{id:"basic-addon1"}},[t("i",{staticClass:"fa fa-search"})])])]),e._v(" "),t("div",{staticClass:"col-12"},[t("div",{staticClass:"position-relative"},[t("div",{staticClass:"search-box",class:{active:0==e.hidden},attrs:{id:"search-box"}},e._l(e.products,(function(n){return t("div",{key:n.id,staticClass:"box-products"},[t("a",{staticClass:"single-product",attrs:{href:e.url+"/product/"+n.slug}},[0==n.images.length?t("div",[t("nuxt-img",{attrs:{provider:"customProvider",src:"nuxt/default.webp",alt:"default",width:"100px"}})],1):t("div",[t("nuxt-img",{attrs:{provider:"customProvider",src:n.images[0].path,alt:n.name,width:"100px"}})],1),e._v(" "),t("div",{staticClass:"ms-5"},[t("p",[e._v(e._s(n.name))]),e._v(" "),t("p",[t("strong",[e._v(e._s(n.price)+" €")])])])])])})),0)])])])])])}),[],!1,null,null,null);t.default=component.exports},536:function(e,t,n){"use strict";n(534)},541:function(e,t){e.exports=function(data,e,t,n){var r=new Blob(void 0!==n?[n,data]:[data],{type:t||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(r,e);else{var o=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(r):window.webkitURL.createObjectURL(r),c=document.createElement("a");c.style.display="none",c.href=o,c.setAttribute("download",e),void 0===c.download&&c.setAttribute("target","_blank"),document.body.appendChild(c),c.click(),setTimeout((function(){document.body.removeChild(c),window.URL.revokeObjectURL(o)}),200)}}},584:function(e,t,n){"use strict";n.r(t);n(13),n(2),n(0),n(12),n(15),n(17);var r=n(11),o=(n(51),n(18),n(19),n(42),n(20),n(3),n(47),n(70),{auth:!0,data:function(){return{invoices:[],selectedInvoices:[],month:0,limit:10,day:0,year:0,years:[],page:1,perPage:10,pdfViewer:!1,id:"",newInvoice:!1}},beforeMount:function(){var e=this;this.$root.$on("closeNewInvoice",(function(data){e.newInvoice=data}))},mounted:function(){this.getInvoices()},components:{InvoiceViewer:function(){return n.e(14).then(n.bind(null,641))},NewInvoice:function(){return Promise.all([n.e(3),n.e(15)]).then(n.bind(null,642))}},computed:{paginatedItems:function(){var e=(this.page-1)*parseInt(this.limit);return this.invoices.slice(e,e+parseInt(this.limit))}},watch:{day:function(){var e=this;setTimeout((function(){e.getInvoices()}),500)},month:function(){var e=this;setTimeout((function(){e.getInvoices()}),500)},year:function(){var e=this;setTimeout((function(){e.getInvoices()}),500)},limit:function(){var e=this;setTimeout((function(){e.getInvoices()}),500)},id:function(){this.pdfViewer=!0}},methods:{getInvoices:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/api/invoice");case 2:n=t.sent,e.invoices=n.data.data,0!=e.day&&(e.invoices=e.invoices.filter((function(t){return new Date(t.created_at).getDate()==e.day}))),0!=e.month&&(e.invoices=e.invoices.filter((function(t){return new Date(t.created_at).getMonth()+1==e.month}))),0!=e.year&&(e.invoices=e.invoices.filter((function(t){return new Date(t.created_at).getFullYear()==e.year}))),e.getYears();case 8:case"end":return t.stop()}}),t)})))()},getUrl:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=n(541),r.next=3,t.$axios.get("/api/invoices/"+e.id,{responseType:"blob"}).then((function(t){o(t.data,e.filename)}));case 3:case"end":return r.stop()}}),r)})))()},formatDate:function(e){var t=new Date(e),n=""+(t.getMonth()+1),r=""+t.getDate(),o=t.getFullYear();return n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),[r,n,o].join("-")},downloadZip:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n(541),t.next=3,e.$axios.get("/api/multiples-invoices",{responseType:"blob",params:{selecteds:JSON.stringify(e.selectedInvoices)}}).then((function(e){r(e.data,"facturas.zip")})).catch((function(e){}));case 3:case"end":return t.stop()}}),t)})))()},selectAll:function(){var e=this;this.$refs.checkSelect.checked?this.invoices.forEach((function(t){e.selectedInvoices.push(t.id)})):this.selectedInvoices=[]},getYears:function(){var e=this;this.invoices.forEach((function(t){var n=new Date(t.created_at);e.years.includes(n.getFullYear())||e.years.push(n.getFullYear())}))},myCallback:function(e){this.page=e},changeView:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log(e),t.id=e;case 2:case"end":return n.stop()}}),n)})))()}}}),c=n(68),component=Object(c.a)(o,(function(){var e,t,n,r,o=this,c=o._self._c;return c("div",[o.newInvoice?o._e():c("div",{staticClass:"main"},[c("div",[0==(null===(e=o.selectedInvoices)||void 0===e?void 0:e.length)?c("div",{staticClass:"d-flex justify-content-end"},[c("button",{staticClass:"btn bg-trivi-red text-white mb-2",on:{click:function(e){o.newInvoice=!0}}},[c("i",{staticClass:"fa fa-plus"})])]):o._e(),o._v(" "),(null===(t=o.selectedInvoices)||void 0===t?void 0:t.length)>0?c("div",{staticClass:"d-flex justify-content-end"},[c("button",{staticClass:"btn bg-trivi-green text-white mb-2",on:{click:o.downloadZip}},[c("i",{staticClass:"fa fa-download"}),o._v("\n                    Descargar "+o._s(null===(n=o.selectedInvoices)||void 0===n?void 0:n.length)+" facturas\n                ")])]):o._e(),o._v(" "),o._m(0)]),o._v(" "),c("div",{staticClass:"d-flex justify-content-between"},[c("div",{staticClass:"form-group"},[c("label",{attrs:{for:"limit"}},[o._v("Mostrar")]),o._v(" "),c("select",{directives:[{name:"model",rawName:"v-model",value:o.limit,expression:"limit"}],staticClass:"form-control",attrs:{id:"limit"},on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));o.limit=e.target.multiple?t:t[0]}}},[c("option",{attrs:{value:"10"}},[o._v("10")]),o._v(" "),c("option",{attrs:{value:"20"}},[o._v("20")]),o._v(" "),c("option",{attrs:{value:"50"}},[o._v("50")]),o._v(" "),c("option",{attrs:{value:"1000"}},[o._v("Todo")])])]),o._v(" "),c("div",{staticClass:"d-flex"},[c("div",{staticClass:"form-group me-2"},[c("label",{attrs:{for:"day"}},[o._v("Día")]),o._v(" "),c("select",{directives:[{name:"model",rawName:"v-model",value:o.day,expression:"day"}],staticClass:"form-control",attrs:{id:"day"},on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));o.day=e.target.multiple?t:t[0]}}},[c("option",{attrs:{value:"0"}},[o._v("Todos")]),o._v(" "),o._l(31,(function(e){return c("option",{key:e,domProps:{value:e}},[o._v(o._s(e))])}))],2)]),o._v(" "),c("div",{staticClass:"form-group me-2"},[c("label",{attrs:{for:"month"}},[o._v("Mes")]),o._v(" "),c("select",{directives:[{name:"model",rawName:"v-model",value:o.month,expression:"month"}],staticClass:"form-control",attrs:{id:"month"},on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));o.month=e.target.multiple?t:t[0]}}},[c("option",{attrs:{value:"0"}},[o._v("Todos")]),o._v(" "),c("option",{attrs:{value:"1"}},[o._v("Enero")]),o._v(" "),c("option",{attrs:{value:"2"}},[o._v("Febrero")]),o._v(" "),c("option",{attrs:{value:"3"}},[o._v("Marzo")]),o._v(" "),c("option",{attrs:{value:"4"}},[o._v("Abril")]),o._v(" "),c("option",{attrs:{value:"5"}},[o._v("Mayo")]),o._v(" "),c("option",{attrs:{value:"6"}},[o._v("Junio")]),o._v(" "),c("option",{attrs:{value:"7"}},[o._v("Julio")]),o._v(" "),c("option",{attrs:{value:"8"}},[o._v("Agosto")]),o._v(" "),c("option",{attrs:{value:"9"}},[o._v("Septiembre")]),o._v(" "),c("option",{attrs:{value:"10"}},[o._v("Octubre")]),o._v(" "),c("option",{attrs:{value:"11"}},[o._v("Noviembre")]),o._v(" "),c("option",{attrs:{value:"12"}},[o._v("Diciembre")])])]),o._v(" "),c("div",{staticClass:"form-group"},[c("label",{attrs:{for:"year"}},[o._v("Año")]),o._v(" "),c("select",{directives:[{name:"model",rawName:"v-model",value:o.year,expression:"year"}],staticClass:"form-control",attrs:{id:"year"},on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));o.year=e.target.multiple?t:t[0]}}},[c("option",{attrs:{value:"0"}},[o._v("Todos")]),o._v(" "),o._l(o.years,(function(e){return c("option",{key:e,domProps:{value:e}},[o._v(o._s(e))])}))],2)])])]),o._v(" "),c("div",{staticClass:"table-responsive"},[c("table",{staticClass:"table"},[c("thead",[c("tr",[c("th",[c("div",{staticClass:"form-check"},[c("input",{ref:"checkSelect",staticClass:"form-check-input",attrs:{type:"checkbox"},on:{change:o.selectAll}})])]),o._v(" "),c("th",{attrs:{scope:""}},[o._v("Factura")]),o._v(" "),c("th",{attrs:{scope:""}},[o._v("Cliente")]),o._v(" "),c("th",{attrs:{scope:""}},[o._v("Fecha")]),o._v(" "),c("th",{attrs:{scope:""}},[o._v("Acciones")])])]),o._v(" "),(null===(r=o.invoices)||void 0===r?void 0:r.length)>0?c("tbody",o._l(o.paginatedItems,(function(e){var t,n,r,l,v,d,f,m,h,_,w,y;return c("tr",{key:e.id},[c("td",[c("div",{staticClass:"form-check"},[c("input",{directives:[{name:"model",rawName:"v-model",value:o.selectedInvoices,expression:"selectedInvoices"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{value:e.id,checked:Array.isArray(o.selectedInvoices)?o._i(o.selectedInvoices,e.id)>-1:o.selectedInvoices},on:{change:function(t){var n=o.selectedInvoices,r=t.target,c=!!r.checked;if(Array.isArray(n)){var l=e.id,v=o._i(n,l);r.checked?v<0&&(o.selectedInvoices=n.concat([l])):v>-1&&(o.selectedInvoices=n.slice(0,v).concat(n.slice(v+1)))}else o.selectedInvoices=c}}})])]),o._v(" "),c("td",[o._v(o._s(e.invoice_number))]),o._v(" "),c("td",[o._v(o._s("Guest"==(null===(t=e.order)||void 0===t||null===(n=t.user_profile)||void 0===n?void 0:n.name)?null===(r=e.order)||void 0===r||null===(l=r.guest)||void 0===l?void 0:l.name:null===(v=e.order)||void 0===v||null===(d=v.user_profile)||void 0===d?void 0:d.name)+" "+o._s("Guest"==(null===(f=e.order)||void 0===f||null===(m=f.user_profile)||void 0===m?void 0:m.lastname)?null===(h=e.order)||void 0===h||null===(_=h.guest)||void 0===_?void 0:_.lastname:null===(w=e.order)||void 0===w||null===(y=w.user_profile)||void 0===y?void 0:y.lastname))]),o._v(" "),c("td",[o._v(o._s(o.formatDate(e.created_at)))]),o._v(" "),c("td",[c("a",{staticClass:"btn bg-trivi-orange",on:{click:function(t){return t.preventDefault(),o.getUrl(e)}}},[c("i",{staticClass:"pe-7s-download"})])])])})),0):c("tbody",[o._m(1)])]),o._v(" "),c("div",{staticClass:"d-flex justify-content-center mt-2"},[c("pagination",{attrs:{records:o.invoices.length,perPage:parseInt(o.limit)},on:{paginate:o.myCallback},model:{value:o.page,callback:function(e){o.page=e},expression:"page"}})],1)])]),o._v(" "),o.pdfViewer?c("InvoiceViewer",{attrs:{id:o.id}}):o._e(),o._v(" "),o.newInvoice?c("NewInvoice"):o._e()],1)}),[function(){var e=this._self._c;return e("div",[e("h2",[this._v("Facturas")])])},function(){var e=this._self._c;return e("tr",[e("td",{attrs:{colspan:"6"}},[this._v("No hay pedidos pendientes.")])])}],!1,null,null,null);t.default=component.exports},616:function(e,t,n){"use strict";n.r(t);n(0),n(18),n(19);var r={components:{SideNav:function(){return n.e(2).then(n.bind(null,639))},Search:function(){return n.e(1).then(n.bind(null,638))},NavTop:function(){return n.e(0).then(n.bind(null,636))},InvoicesTable:function(){return Promise.resolve().then(n.bind(null,584))}}},o=n(68),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("div",[t("SideNav"),e._v(" "),t("NavTop"),e._v(" "),t("Search"),e._v(" "),t("InvoicesTable")],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Search:n(535).default,InvoicesTable:n(584).default})}}]);