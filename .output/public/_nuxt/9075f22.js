(window.webpackJsonp=window.webpackJsonp||[]).push([[13,22],{559:function(t,e,n){"use strict";n.r(e);var o={auth:!0,name:"Note",data:function(){return{note:""}},methods:{beforeOpen:function(t){var e=t.params;this.note=e}}},r=n(68),component=Object(r.a)(o,(function(){var t=this,e=t._self._c;return e("modal",{attrs:{name:"note",width:"600px",height:"500px"},on:{"before-open":t.beforeOpen}},[e("div",[e("div",{staticClass:"modal-header border-bottom-1 mb-5"},[e("h5",{staticClass:"modal-title"},[t._v("Notas")]),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.$modal.hide("note")}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"mb-2",attrs:{for:"note"}},[t._v("Nota del cliente")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.note,expression:"note"}],staticClass:"form-control",attrs:{id:"note",rows:"10",disabled:""},domProps:{value:t.note},on:{input:function(e){e.target.composing||(t.note=e.target.value)}}})])])])])}),[],!1,null,null,null);e.default=component.exports},568:function(t,e){t.exports=function(data,t,e,n){var o=new Blob(void 0!==n?[n,data]:[data],{type:e||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(o,t);else{var r=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(o):window.webkitURL.createObjectURL(o),c=document.createElement("a");c.style.display="none",c.href=r,c.setAttribute("download",t),void 0===c.download&&c.setAttribute("target","_blank"),document.body.appendChild(c),c.click(),setTimeout((function(){document.body.removeChild(c),window.URL.revokeObjectURL(r)}),200)}}},622:function(t,e,n){"use strict";n.r(e);var o=n(13),r=(n(55),n(9),n(22),n(42),n(0),n(31),n(12),n(2),n(17),{auth:!0,data:function(){return{orders:[],users:[],order:{},user:{},pagination:{}}},components:{Note:n(559).default},mounted:function(){this.getOrders(),this.getUserName()},computed:{page:function(){var t,e=null!==(t=this.$route.query.page)&&void 0!==t?t:1;return e>this.pagination.last_page?(this.$router.replace({query:{page:this.pagination.last_page}}),this.$router.push(),this.pagination.last_page):e}},watch:{page:function(){var t=this;this.$nextTick((function(){t.$nuxt.$loading.start(),setTimeout((function(){t.$nuxt.$loading.finish()}),500)})),setTimeout((function(){t.getOrders()}),500)}},methods:{onClick:function(t){this.$modal.show("note",t)},getOrders:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/api/orders?perPage=10&sort=-id&page="+t.page+"&history[status]=");case 2:n=e.sent,t.orders=n.data.data,o=n.data,t.pagination={links:o.meta.links,current_page:o.meta.current_page,last_page:o.meta.last_page};case 6:case"end":return e.stop()}}),e)})))()},getUserName:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/api/users").then((function(e){t.users=e.data.data})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},getName:function(t){return this.users.filter((function(e){if(e.id==t.user_profile_id)return e})).map((function(t){return t.name+" "+t.lastname})).toString()},changePage:function(t){this.$router.replace({query:{page:t.split("page=")[1]}})},getUrl:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=n(568),o.next=3,e.$axios.get("/api/invoices/"+t.invoice.id,{responseType:"blob"}).then((function(e){r(e.data,t.invoice.filename)}));case 3:case"end":return o.stop()}}),o)})))()}}}),c=n(68),component=Object(c.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 overflow-auto"},[e("table",{staticClass:"table"},[t._m(0),t._v(" "),t.orders.length>0?e("tbody",t._l(t.orders,(function(n){return e("tr",{key:n.id},[e("td",[t._v(t._s(n.order_date))]),t._v(" "),"PENDIENTE"==n.paid?e("td",[t._v("Pendiente")]):t._e(),t._v(" "),"PROCESANDO"==n.paid?e("td",[t._v("Procesando")]):t._e(),t._v(" "),"PAGADO"==n.paid?e("td",[t._v("Pagado")]):t._e(),t._v(" "),"RECHAZADO"==n.paid?e("td",[t._v("Rechazado")]):t._e(),t._v(" "),"CONTRAREEMBOLSO"==n.paid?e("td",[t._v("Contra reembolso")]):t._e(),t._v(" "),"TRANSFERENCIA"==n.paid?e("td",[t._v("Transferencia")]):t._e(),t._v(" "),4==n.status?e("td",[t._v("Entregado")]):e("td",[t._v("Cancelado")]),t._v(" "),e("td",[t._v(t._s(n.payment_method))]),t._v(" "),e("td",[t._v(t._s(n.shipping_method))]),t._v(" "),1==n.invoice_paper?e("td",[t._v("Si")]):e("td",[t._v("No")]),t._v(" "),e("td",[e("n-link",{staticClass:"btn btn-primary",attrs:{to:"/orders/".concat(n.id)}},[e("i",{staticClass:"pe-7s-look"})]),t._v(" "),"PAGADO"==n.paid||"CONTRAREEMBOLSO"==n.paid||"TRANSFERENCIA"==n.paid&&null!=n.invoice?e("a",{staticClass:"btn btn-warning",on:{click:function(e){return e.preventDefault(),t.getUrl(n)}}},[e("i",{staticClass:"pe-7s-download"})]):t._e(),t._v(" "),null!=n.note?e("a",{staticClass:"btn btn-secondary",on:{click:function(e){return e.preventDefault(),t.onClick(n.note)}}},[e("i",{staticClass:"pe-7s-note2"})]):t._e()],1)])})),0):e("tbody",[t._m(1)])]),t._v(" "),e("Note"),t._v(" "),e("div",{staticClass:"d-flex justify-content-center mt-5"},[e("nav",{attrs:{"aria-label":"..."}},[e("ul",{staticClass:"pagination-custom"},[e("client-only",t._l(t.pagination.links,(function(n){return e("li",{key:"pagination_link-"+n.label,staticClass:"page-link-custom",class:{disabled:null==n.url,active:1==n.active}},[e("a",{staticClass:"page-link",staticStyle:{cursor:"pointer"},domProps:{innerHTML:t._s(n.label)},on:{click:function(e){return e.preventDefault(),t.changePage(n.url)}}})])})),0)],1)])])],1)])])}),[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("Fecha")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Estado Pago")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Estado Pedido")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Método Pago")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Transporte")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Factura")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Acciones")])])])},function(){var t=this._self._c;return t("tr",[t("td",{attrs:{colspan:"6"}},[this._v("No hay pedidos en el historial.")])])}],!1,null,null,null);e.default=component.exports}}]);