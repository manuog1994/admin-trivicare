(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{656:function(t,e,r){"use strict";r.r(e);r(13),r(2),r(0),r(18);var n=r(11),l=(r(51),r(76),r(564)),o=r(565),c={data:function(){return{checked:!1,disabled:!0,paises:[{id:28,name:"España"}],ciudades:o,provincias:l,cities:[],error:null,country:"",state:"",city:""}},mounted:function(){this.$axios.get("/sanctum/csrf-cookie")},methods:{getStates:function(t){var e=t.target.value,r=this.paises.find((function(t){return t.name===e})).id;this.provincias=this.provincias.data.filter((function(t){return t.id_country===r}))},getCities:function(t){var e=t.target.value,r=this.provincias.find((function(t){return t.name===e})).id;this.cities=this.ciudades.data.filter((function(t){return t.id_state===r}))},createProfile:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var form,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$refs.newprofile.checkValidity()){e.next=10;break}return t.$refs.newprofile.classList.remove("was-validated"),form=t.$refs.newprofile,(r=new FormData(form)).append("user_id",t.$auth.user.id),e.next=7,t.$axios.post("/api/register-profile",r).then((function(e){t.$refs.newprofile.reset(),t.$notify({type:"success",text:"Dirección creada correctamente"}),t.$auth.fetchUser(),t.error=null})).catch((function(e){t.error=e.response.data.message}));case 7:t.$root.$emit("newUserAddress",!1),e.next=11;break;case 10:t.$refs.newprofile.classList.add("was-validated");case 11:case"end":return e.stop()}}),e)})))()}}},d=r(68),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return e("div",[t.error?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v("\n        "+t._s(t.error)+"\n    ")]):t._e(),t._v(" "),e("form",{ref:"newprofile",staticClass:"row",on:{submit:function(e){return e.preventDefault(),t.createProfile.apply(null,arguments)}}},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),e("div",{staticClass:"col-lg-6 col-md-6"},[e("div",{staticClass:"billing-info"},[e("label",{attrs:{for:""}},[t._v("País*")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.country,expression:"country"}],staticClass:"form-select",attrs:{"aria-label":"Default select example",name:"country",required:""},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.country=e.target.multiple?r:r[0]},t.getStates]}},[e("option",{attrs:{disabled:"",selected:""}},[t._v("Seleccione su país")]),t._v(" "),t._l(t.paises,(function(r){return e("option",{key:r.id,domProps:{value:r.name}},[t._v(t._s(r.name))])}))],2)])]),t._v(" "),e("div",{staticClass:"col-lg-6 col-md-6"},[e("div",{staticClass:"billing-info"},[e("label",{attrs:{for:""}},[t._v("Provincia*")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.state,expression:"state"}],staticClass:"form-select",attrs:{"aria-label":"Default select example",name:"state",required:""},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.state=e.target.multiple?r:r[0]},t.getCities]}},[e("option",{attrs:{disabled:"",selected:""}},[t._v("Seleccione su provincia")]),t._v(" "),t._l(t.provincias,(function(r){return e("option",{key:"state"+r.id,domProps:{value:r.name}},[t._v(t._s(r.name))])}))],2)])]),t._v(" "),e("div",{staticClass:"col-lg-8 col-md-8"},[e("div",{staticClass:"billing-info"},[e("label",{attrs:{for:""}},[t._v("Ciudad*")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.city,expression:"city"}],staticClass:"form-select",attrs:{"aria-label":"Default select example",name:"city",required:""},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.city=e.target.multiple?r:r[0]}}},[e("option",{attrs:{disabled:"",selected:""}},[t._v("Seleccione su ciudad")]),t._v(" "),t._l(t.cities,(function(r){return e("option",{key:"city"+r.name,domProps:{value:r.name}},[t._v(t._s(r.name))])}))],2)])]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6)]),t._v(" "),e("div",{staticClass:"d-flex justify-content-end mt-3"},[e("button",{staticClass:"btn rounded-0 text-info",on:{click:t.createProfile}},[t._v("Guardar")])])])}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-6 col-md-6"},[e("div",{staticClass:"billing-info"},[e("label",[t._v("Nombre*")]),t._v(" "),e("input",{staticClass:"form-control",attrs:{name:"name",type:"text",required:""}})])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-6 col-md-6"},[e("div",{staticClass:"billing-info"},[e("label",[t._v("Apellidos*")]),t._v(" "),e("input",{staticClass:"form-control",attrs:{name:"lastname",type:"text",required:""}})])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-12 col-md-12"},[e("div",{staticClass:"billing-info"},[e("label",[t._v("Dirección*")]),t._v(" "),e("input",{staticClass:"form-control",attrs:{name:"address",type:"text",required:""}})])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-12 col-md-12"},[e("div",{staticClass:"billing-info"},[e("label",[t._v("Opcional")]),t._v(" "),e("input",{staticClass:"form-control",attrs:{name:"optional_address",type:"text"}})])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-4 col-md-4"},[e("div",{staticClass:"billing-info"},[e("label",[t._v("Código Postal*")]),t._v(" "),e("input",{staticClass:"form-control",attrs:{name:"zipcode",type:"number",required:""}})])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-5 col-md-5"},[e("div",{staticClass:"billing-info"},[e("label",[t._v("Teléfono*")]),t._v(" "),e("input",{staticClass:"form-control",attrs:{name:"phone",type:"number",required:""}})])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-7 col-md-7"},[e("div",{staticClass:"billing-info"},[e("label",[t._v("DNI/NIE/NIF*")]),t._v(" "),e("input",{staticClass:"form-control",attrs:{name:"dni",type:"text",required:""}})])])}],!1,null,null,null);e.default=component.exports}}]);