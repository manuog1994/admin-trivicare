(window.webpackJsonp=window.webpackJsonp||[]).push([[3,21,22],{559:function(t,e,n){"use strict";n.r(e);var r={auth:!0,name:"Note",data:function(){return{note:""}},methods:{beforeOpen:function(t){var e=t.params;this.note=e}}},o=n(68),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("modal",{attrs:{name:"note",width:"600px",height:"500px"},on:{"before-open":t.beforeOpen}},[e("div",[e("div",{staticClass:"modal-header border-bottom-1 mb-5"},[e("h5",{staticClass:"modal-title"},[t._v("Notas")]),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.$modal.hide("note")}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"mb-2",attrs:{for:"note"}},[t._v("Nota del cliente")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.note,expression:"note"}],staticClass:"form-control",attrs:{id:"note",rows:"10",disabled:""},domProps:{value:t.note},on:{input:function(e){e.target.composing||(t.note=e.target.value)}}})])])])])}),[],!1,null,null,null);e.default=component.exports},568:function(t,e){t.exports=function(data,t,e,n){var r=new Blob(void 0!==n?[n,data]:[data],{type:e||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(r,t);else{var o=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(r):window.webkitURL.createObjectURL(r),c=document.createElement("a");c.style.display="none",c.href=o,c.setAttribute("download",t),void 0===c.download&&c.setAttribute("target","_blank"),document.body.appendChild(c),c.click(),setTimeout((function(){document.body.removeChild(c),window.URL.revokeObjectURL(o)}),200)}}},574:function(t,e,n){t.exports={}},588:function(t,e,n){"use strict";n.r(e);var r=n(13),o=(n(55),{data:function(){return{order:{id:"",track:""}}},methods:{beforeOpen:function(t){var e=t.params;this.order.id=e},updateStatus:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.put("/api/orders/status/"+t.order.id,{status:3,track:t.order.track}).then((function(){t.$notify({title:"El estado del pedido ha sido actualizado"}),t.$modal.hide("modal-track"),t.order.track=""}));case 2:case"end":return e.stop()}}),e)})))()}}}),c=n(68),component=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("modal",{attrs:{name:"modal-track",width:"800px",height:"auto"},on:{"before-open":t.beforeOpen}},[e("div",[e("h2",[t._v("Añadir número de seguimiento")])]),t._v(" "),e("form",{on:{submit:function(e){return e.preventDefault(),t.updateStatus.apply(null,arguments)}}},[e("div",[e("label",{attrs:{for:"track"}},[t._v("Número de seguimiento")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.order.track,expression:"order.track"}],attrs:{type:"text",name:"track",id:"track"},domProps:{value:t.order.track},on:{input:function(e){e.target.composing||t.$set(t.order,"track",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"d-flex justify-content-end mt-3"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Enviar")])])])])}),[],!1,null,null,null);e.default=component.exports},595:function(t,e,n){"use strict";n(574)},621:function(t,e,n){"use strict";n.r(e);var r=n(13),o=(n(55),n(9),n(22),n(42),n(559)),c=n(588),d={auth:!0,data:function(){return{orders:[],users:[],order:{},user:{},pagination:{}}},components:{Note:o.default,ModalTrack:c.default},mounted:function(){this.getOrders()},computed:{page:function(){var t,e=null!==(t=this.$route.query.page)&&void 0!==t?t:1;return e>this.pagination.last_page?(this.$router.replace({query:{page:this.pagination.last_page}}),this.$router.push(),this.pagination.last_page):e}},watch:{page:function(){var t=this;this.$nextTick((function(){t.$nuxt.$loading.start(),setTimeout((function(){t.$nuxt.$loading.finish()}),500)})),setTimeout((function(){t.getOrders()}),500)}},methods:{onClick:function(t){this.$modal.show("note",t)},getOrders:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/api/orders?perPage=10&sort=-id&page="+t.page+"&status[status]=");case 2:n=e.sent,t.orders=n.data.data,r=n.data,t.pagination={links:r.meta.links,current_page:r.meta.current_page,last_page:r.meta.last_page};case 6:case"end":return e.stop()}}),e)})))()},getUrl:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=n(568),r.next=3,e.$axios.get("/api/invoices/"+t.invoice.id,{responseType:"blob"}).then((function(e){o(e.data,t.invoice.filename)}));case 3:case"end":return r.stop()}}),r)})))()},loadOrder:function(t){this.order=t},updateStatus:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(3!=(r=t.target.value)){n.next=5;break}e.$modal.show("modal-track",e.order.id),n.next=7;break;case 5:return n.next=7,e.$axios.put("/api/orders/status/"+e.order.id,{status:r}).then((function(){return e.$notify({title:"El estado del pedido ha sido actualizado"})}));case 7:case"end":return n.stop()}}),n)})))()},updatePaid:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.target.value,n.next=3,e.$axios.put("/api/orders/paid/"+e.order.id,{paid:r}).then((function(){return e.$notify({title:"El estado del pedido ha sido actualizado"})}));case 3:case"end":return n.stop()}}),n)})))()},changePage:function(t){this.$router.replace({query:{page:t.split("page=")[1]}})}}},l=(n(595),n(68)),component=Object(l.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-responsive margin-left-sidebar"},[e("table",{staticClass:"table"},[t._m(0),t._v(" "),t.orders.length>0?e("tbody",t._l(t.orders,(function(n){return e("tr",{key:n.id},[e("td",[t._v(t._s(n.order_date))]),t._v(" "),"PENDIENTE"==n.paid?e("td",[e("select",{staticClass:"form-control w-50",domProps:{value:n.paid},on:{change:t.updatePaid,click:function(e){return t.loadOrder(n)}}},[e("option",{attrs:{value:"PENDIENTE"}},[t._v("Pendiente")]),t._v(" "),e("option",{attrs:{value:"PAGADO"}},[t._v("Pagado")]),t._v(" "),e("option",{attrs:{value:"RECHAZADO"}},[t._v("Rechazado")])])]):t._e(),t._v(" "),"PROCESANDO"==n.paid?e("td",[t._v("Procesando")]):t._e(),t._v(" "),"PAGADO"==n.paid?e("td",[t._v("Pagado")]):t._e(),t._v(" "),"RECHAZADO"==n.paid?e("td",[t._v("Rechazado")]):t._e(),t._v(" "),"CONTRAREEMBOLSO"==n.paid?e("td",[t._v("Contra reembolso")]):t._e(),t._v(" "),"TRANSFERENCIA"==n.paid?e("td",[t._v("Transferencia")]):t._e(),t._v(" "),e("td",[e("n-link",{staticClass:"p-2",attrs:{to:"/orders/".concat(n.id)}},[e("i",{staticClass:"pe-7s-look"})]),t._v(" "),"PAGADO"==n.paid||"CONTRAREEMBOLSO"==n.paid||"TRANSFERENCIA"==n.paid&&null!=n.invoice?e("a",{staticClass:"p-2",on:{click:function(e){return e.preventDefault(),t.getUrl(n)}}},[e("i",{staticClass:"pe-7s-download"})]):t._e(),t._v(" "),null!=n.note?e("a",{staticClass:"p-2",on:{click:function(e){return e.preventDefault(),t.onClick(n.note)}}},[e("i",{staticClass:"pe-7s-note2"})]):t._e()],1)])})),0):e("tbody",[t._m(1)])]),t._v(" "),e("Note"),t._v(" "),e("ModalTrack"),t._v(" "),e("div",{staticClass:"d-flex justify-content-center mt-5"},[e("nav",{attrs:{"aria-label":"..."}},[e("ul",{staticClass:"pagination-custom"},[e("client-only",t._l(t.pagination.links,(function(n){return e("li",{key:"pagination_link-"+n.label,staticClass:"page-link-custom",class:{disabled:null==n.url,active:1==n.active}},[e("a",{staticClass:"page-link",staticStyle:{cursor:"pointer"},domProps:{innerHTML:t._s(n.label)},on:{click:function(e){return e.preventDefault(),t.changePage(n.url)}}})])})),0)],1)])])],1)}),[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",{attrs:{scope:""}},[t._v("Fecha")]),t._v(" "),e("th",{attrs:{scope:""}},[t._v("Estado Pago")]),t._v(" "),e("th",{attrs:{scope:""}},[t._v("Acciones")])])])},function(){var t=this._self._c;return t("tr",[t("td",{attrs:{colspan:"6"}},[this._v("No hay pedidos pendientes.")])])}],!1,null,null,null);e.default=component.exports}}]);